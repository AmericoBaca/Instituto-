{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ titulo }}</h2>
    <div>
        <a href="{% url 'cursos:editar_curso' curso.id %}" class="btn btn-warning">
            <i class="fas fa-edit"></i> Editar
        </a>
        <a href="{% url 'cursos:lista_cursos' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Volver
        </a>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Información del Curso</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Código:</strong> {{ curso.codigo }}</p>
                        <p><strong>Nombre:</strong> {{ curso.nombre }}</p>
                        <p><strong>Nivel:</strong> 
                            <span class="badge 
                                {% if curso.nivel == 'B' %}bg-info
                                {% elif curso.nivel == 'I' %}bg-warning
                                {% else %}bg-danger{% endif %}">
                                {{ curso.get_nivel_display }}
                            </span>
                        </p>
                        <p><strong>Duración:</strong> {{ curso.duracion }} horas</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Precio:</strong> S/. {{ curso.precio }}</p>
                        <p><strong>Cupo máximo:</strong> {{ curso.cupo_maximo }} alumnos</p>
                        <p><strong>Inscritos:</strong> 
                            <span class="badge {% if curso.cupos_disponibles > 0 %}bg-success{% else %}bg-danger{% endif %}">
                                {{ curso.alumnos_inscritos }} alumnos
                            </span>
                        </p>
                        <p><strong>Estado:</strong> 
                            <span class="badge 
                                {% if curso.estado == 'A' %}bg-success
                                {% elif curso.estado == 'I' %}bg-secondary
                                {% else %}bg-primary{% endif %}">
                                {{ curso.get_estado_display }}
                            </span>
                        </p>
                    </div>
                </div>
                
                <div class="mt-3">
                    <strong>Descripción:</strong>
                    <p class="mt-2">{{ curso.descripcion|linebreaks }}</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Información Adicional</h5>
            </div>
            <div class="card-body">
                <p><strong>Profesor:</strong> {{ curso.profesor }}</p>
                <p><strong>Fecha de Inicio:</strong> {{ curso.fecha_inicio }}</p>
                <p><strong>Fecha de Fin:</strong> {{ curso.fecha_fin }}</p>
                <p><strong>Creado por:</strong> {{ curso.creado_por.username }}</p>
                <p><strong>Fecha de creación:</strong> {{ curso.created_at|date:"d/m/Y H:i" }}</p>
                <p><strong>Última actualización:</strong> {{ curso.updated_at|date:"d/m/Y H:i" }}</p>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-body text-center">
                <h6>Cupos Disponibles</h6>
                <div class="display-4 text-{% if curso.cupos_disponibles > 0 %}success{% else %}danger{% endif %}">
                    {{ curso.cupos_disponibles }}
                </div>
                <p class="text-muted">de {{ curso.cupo_maximo }} cupos</p>
                
                {% if curso.esta_activo and curso.cupos_disponibles > 0 %}
                <a href="#" class="btn btn-success btn-sm">Matricular Alumno</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

